<link rel="import" href="./toolbar-item.html">
<dom-module id="app-toolbar">
    <template>
        <style include="app-toolbar-shared-styles">
         :host {
            display: var(--app-toolbar-display, block);
            font-family: var(--toolbar-item-font-family, var(--default-font-family, Arial, sans-serif));
            font-size: var(--toolbar-item-font-size, var(--default-font-size, 14px));
        }

        .container {
            font-size: 0;
            vertical-align: top;
            @apply --app-toolbar-box-style;
        }

        .tool-item {
            display: inline-block;
            border-radius:
        }

        toolbar-item {
            --common-toolbar-item-box-style: {
                min-width: 120px;
                min-height: 120px;
                vertical-align: middle;
                text-align: center;
            }
            --toolbar-item-box-style: {
                @apply --common-toolbar-item-box-style;
            }
            --toolbar-item-content-style: {
                vertical-align: middle;
                text-align: center;
            }
            --toolbar-item-image-style: {
                height: 80px;
                width: 80px;
            }
        }

        toolbar-item.item-0 {
            --toolbar-item-box-style: {
                @apply --common-toolbar-item-box-style;
                border-radius: 16px 0 0 16px;
            }
        }

        toolbar-item.item-last {
            --toolbar-item-box-style: {
                @apply --common-toolbar-item-box-style;
                border-radius: 0 16px 16px 0;
            }
        }
        </style>
        <div class="container">
            <template is="dom-repeat" id="tools-list" items="[[tools]]">
                <div class="tool-item" on-tap="_selectTool">
                    <toolbar-item text="[[item.text]]" icon="[[item.icon]]" image-url="[[item.imageUrl]]" image-alt="[[item.imageAlt]]" selected="[[_isItemSelected(index, selectedIndexes)]]" class$="[[_computeClass(index, tools.length)]]"></toolbar-item>
                </div>
            </template>
        </div>
    </template>
    <script>
    Polymer({
        is: 'app-toolbar',
        properties: {
            tools: {
                type: Array,
                value: [{
                    text: "Uno",
                    icon: "fa fa-user-circle-o fa-fw",
                    imageUrl: "http://icons.iconarchive.com/icons/artua/star-wars/256/Clone-Trooper-icon.png",
                    imageAlt: "Clone Trooper"
                }, {
                    text: "Dos",
                    icon: "fa fa-bank fa-fw",
                    imageUrl: "http://icons.iconarchive.com/icons/artua/star-wars/256/R2D2-icon.png",
                    imageAlt: "R2-D2"
                }, {
                    text: "Tres",
                    icon: "fa fa-calculator fa-fw",
                    imageUrl: "http://icons.iconarchive.com/icons/jonathan-rey/star-wars-vehicles/256/Tie-Advanced-icon.png",
                    imageAlt: "Advanced Tie Fighter"
                }, {
                    text: "Cuatro",
                    icon: "fa fa-check-square fa-fw",
                    imageUrl: "http://icons.iconarchive.com/icons/jonathan-rey/star-wars-vehicles/256/X-Wing-02-icon.png",
                    imageAlt: "X-Wing"
                }, {
                    text: "Cinco",
                    icon: "fa fa-cog fa-spin fa-fw",
                    imageUrl: "http://icons.iconarchive.com/icons/jonathan-rey/star-wars-vehicles/256/Millenium-Falcon-01-icon.png",
                    imageAlt: "Millenium Falcon"
                }, {
                    text: "Seis",
                    icon: "fa fa-spinner fa-pulse fa-fw",
                    imageUrl: "http://icons.iconarchive.com/icons/jonathan-rey/star-wars-vehicles/256/Death-Star-2nd-icon.png",
                    imageAlt: "2nd Death Star"
                }]
            },
            allowMultipleSelections: {
                type: Boolean,
                value: false
            },
            selectedIndexes: {
                type: Array,
                value: []
            }
        },
        _selectTool(event) {
            if (this.allowMultipleSelections) {
                this.selectedIndexes =
                    this.selectedIndexes.includes(event.model.index) ?
                    this.selectedIndexes.filter(index => index != event.model.index) :
                    this.selectedIndexes.concat([event.model.index])
            } else {
                // this.selectedIndexes = this.selectedIndexes.includes(event.model.index) ? [] : [event.model.index];
                this.selectedIndexes = [event.model.index];
            }
        },
        _isItemSelected(index, selectedIndexes) {
            return selectedIndexes.includes(index);
        },
        _computeClass(index, length) {
            return "item-" + index + (index == length - 1 ? " item-last" : "");
        }
    });
    </script>
</dom-module>